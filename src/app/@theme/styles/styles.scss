@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,600,700&display=swap');

// themes - our custom or/and out of the box themes
@import 'themes';

// framework component themes (styles tied to theme variables)
@import '@nebular/theme/styles/globals';
@import '@nebular/auth/styles/globals';

@import 'bootstrap/scss/functions';
@import 'bootstrap/scss/variables';
@import 'bootstrap/scss/mixins';
@import 'bootstrap/scss/grid';
@import '@nebular/theme/styles/global/breakpoints';

// loading progress bar theme
@import './pace.theme';

@import './layout';
@import './overrides';

// install the framework and custom global styles
@include nb-install() {

  // framework global styles
  @include nb-theme-global();
  @include nb-auth-global();

  @include ngx-layout();
  // loading progress bar
  @include ngx-pace-theme();

  @include nb-overrides();
};

// Estilos globales para sidebar colapsado - OCULTAR COMPLETAMENTE en TODAS las resoluciones
// Usar alta especificidad para sobrescribir estilos de Nebular
nb-layout nb-sidebar.menu-sidebar.collapsed,
nb-sidebar.menu-sidebar.collapsed,
.menu-sidebar.collapsed {
  // Ocultar completamente el sidebar en todas las resoluciones (sin display:none para permitir transiciones)
  transform: translateX(-100%) !important;
  width: 0 !important;
  min-width: 0 !important;
  max-width: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  overflow: hidden !important;
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
  position: fixed !important;
  left: -100% !important;
  top: 0 !important;
  bottom: 0 !important;
  z-index: -1 !important;
  clip: rect(0, 0, 0, 0) !important;
  clip-path: inset(100%) !important;
  // Asegurar que no ocupe espacio
  margin-left: 0 !important;
  margin-right: 0 !important;
  // Forzar que no tenga flex
  flex: 0 0 0 !important;
  flex-basis: 0 !important;
  flex-grow: 0 !important;
  flex-shrink: 0 !important;
  transition: transform 0.3s ease, width 0.3s ease, min-width 0.3s ease, max-width 0.3s ease,
    opacity 0.3s ease, visibility 0.3s ease, left 0.3s ease !important;

  ::ng-deep {
    nb-menu {
      width: 100% !important;

      .menu-items {
        width: 100% !important;

        .menu-item {
          display: flex !important;
          justify-content: center !important;
          align-items: center !important;
          padding: 0.75rem 0.5rem !important;
          margin: 0.25rem 0.5rem !important;
          width: calc(100% - 1rem) !important;
          overflow: hidden !important;

          a {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            width: 100% !important;
            padding: 0 !important;
            position: relative !important;
          }

          // OCULTAR TODO EL TEXTO Y ELEMENTOS DE TEXTO
          .menu-title,
          .menu-item-title,
          span:not(.menu-icon):not(nb-icon):not(.menu-icon-wrapper) {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            width: 0 !important;
            height: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            overflow: hidden !important;
            font-size: 0 !important;
            line-height: 0 !important;
            position: absolute !important;
            left: -9999px !important;
            text-indent: -9999px !important;
          }

          // Iconos pequeños - NO agrandar
          .menu-icon,
          nb-icon {
            margin: 0 !important;
            font-size: 1.25rem !important;
            width: 1.25rem !important;
            height: 1.25rem !important;
            min-width: 1.25rem !important;
            min-height: 1.25rem !important;
            max-width: 1.25rem !important;
            max-height: 1.25rem !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            flex-shrink: 0 !important;
          }

          nb-icon svg {
            width: 1.25rem !important;
            height: 1.25rem !important;
          }

          .expand-state {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            width: 0 !important;
            height: 0 !important;
          }

          // Ocultar submenús
          .menu-children {
            display: none !important;
          }
        }

        .menu-group {
          display: none !important;
          visibility: hidden !important;
          opacity: 0 !important;
          height: 0 !important;
          overflow: hidden !important;
          margin: 0 !important;
          padding: 0 !important;

          .menu-group-title {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            width: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
            font-size: 0 !important;
            line-height: 0 !important;
          }
        }
      }
    }

    // Perfil del usuario
    .sidebar-profile {
      padding: 1rem 0.5rem !important;
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      overflow: hidden !important;
      min-height: 4rem !important;

      nb-user {
        ::ng-deep .user-container {
          flex-direction: column !important;
          align-items: center !important;
          justify-content: center !important;
          width: 100% !important;
          overflow: hidden !important;

          .user-picture {
            width: 2rem !important;
            height: 2rem !important;
            margin: 0 auto !important;
            flex-shrink: 0 !important;
          }

          .user-name,
          .user-title,
          .user-initials {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            width: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
            overflow: hidden !important;
            font-size: 0 !important;
            line-height: 0 !important;
            position: absolute !important;
            left: -9999px !important;
          }
        }
      }
    }
  }

  // Media query específico para pantallas grandes (xl) - Forzar ancho 0 en 1920x1080
  // Esto asegura que el sidebar colapsado desaparezca completamente en resoluciones grandes
  @include media-breakpoint-up(xl) {
    nb-layout nb-sidebar.menu-sidebar.collapsed,
    nb-sidebar.menu-sidebar.collapsed,
    .menu-sidebar.collapsed {
      // Forzar que el sidebar colapsado desaparezca completamente en pantallas grandes
      width: 0 !important;
      min-width: 0 !important;
      max-width: 0 !important;
      transform: translateX(-100%) !important;
      opacity: 0 !important;
      visibility: hidden !important;
      pointer-events: none !important;
      position: fixed !important;
      left: -100% !important;
      z-index: -1 !important;
      clip: rect(0, 0, 0, 0) !important;
      clip-path: inset(100%) !important;
      // Asegurar que no ocupe espacio
      flex: 0 0 0 !important;
      flex-basis: 0 !important;
      flex-grow: 0 !important;
      flex-shrink: 0 !important;
      margin-left: 0 !important;
      margin-right: 0 !important;
    }

    // Asegurar que el layout-column ocupe todo el ancho cuando el sidebar está colapsado
    nb-layout nb-sidebar.menu-sidebar.collapsed ~ nb-layout-column,
    nb-layout nb-sidebar.menu-sidebar.collapsed + nb-layout-column {
      padding-left: 0 !important;
      margin-left: 0 !important;
      width: 100% !important;
      max-width: 100% !important;
    }
  }
}
